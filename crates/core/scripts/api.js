var __FLURX_IIFE__=function(e){"use strict";const _=(e,_=null)=>new Promise(((t,i)=>{const o=n(),r=`_${o}`;window.ipc.postMessage(JSON.stringify((_=>null==_?{type:"Command",message:{id:e,resolve_id:o}}:{type:"Command",message:{id:e,args:JSON.stringify(_),resolve_id:o}})(_))),Object.defineProperty(window.__FLURX__,r,{value:e=>{Reflect.deleteProperty(window.__FLURX__,r),(e=>(!e||"object"==typeof e)&&void 0!==e.Ok)(e)?t(e.Ok):(e=>(!e||"object"==typeof e)&&void 0!==e.Err)(e)?i(e.Err):t(e)},writable:!1,configurable:!0})})),t=(e,_)=>{window.ipc.postMessage(JSON.stringify({type:"Event",message:{event_id:e,payload:JSON.stringify(_)}}))},n=()=>window.crypto.getRandomValues(new Uint32Array(1))[0];var i=Object.freeze({__proto__:null,exit:()=>_("FLURX|app::exit"),getName:()=>_("FLURX|app::get_name"),getVersion:()=>_("FLURX|app::get_version")});var o=Object.freeze({__proto__:null,println:e=>t("FLURX|log::println",{message:e})});return e.__emitEvent=(e,_)=>{window.__FLURX__[`_event_${e}`]?.(_)},e.__resolveIpc=(e,_)=>{window.__FLURX__[`_${e}`]?.(_)},e.app=i,e.emit=t,e.invoke=_,e.listen=(e,_)=>{const t=`_event_${e}`;return Object.defineProperty(window.__FLURX__,t,{value:_,writable:!1,configurable:!0}),()=>{Reflect.deleteProperty(window.__FLURX__,t)}},e.log=o,e}({});Object.defineProperty(window,"__FLURX__",{value:__FLURX_IIFE__});
