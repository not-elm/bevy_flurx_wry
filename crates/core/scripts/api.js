var __FLURX_IIFE__=function(e){"use strict";const t=(e,t=null)=>new Promise(((a,_)=>{const r=i(),n=`_${r}`;window.ipc.postMessage(JSON.stringify((t=>null==t?{type:"Command",message:{id:e,resolve_id:r}}:{type:"Command",message:{id:e,args:JSON.stringify(t),resolve_id:r}})(t))),Object.defineProperty(window.__FLURX__,n,{value:e=>{Reflect.deleteProperty(window.__FLURX__,n),(e=>(!e||"object"==typeof e)&&void 0!==e.Ok)(e)?a(e.Ok):(e=>(!e||"object"==typeof e)&&void 0!==e.Err)(e)?_(e.Err):a(e)},writable:!1,configurable:!0})})),a=(e,t)=>{window.ipc.postMessage(JSON.stringify({type:"Event",message:{event_id:e,payload:JSON.stringify(t)}}))},i=()=>window.crypto.getRandomValues(new Uint32Array(1))[0];var _=Object.freeze({__proto__:null,exit:()=>t("FLURX|app::exit"),getName:()=>t("FLURX|app::get_name"),getVersion:()=>t("FLURX|app::get_version")});var r=Object.freeze({__proto__:null,println:e=>a("FLURX|log::println",{message:e})});var n=Object.freeze({__proto__:null,copyFile:async(e,a,i)=>{await t("FLURX|fs::copy_file",{from:e,to:a,...i})},createDir:async(e,a)=>{await t("FLURX|fs::create_dir",{path:e,...a})},exists:async(e,a)=>await t("FLURX|fs::exists",{path:e,...a}),readBinaryFile:async(e,a)=>await t("FLURX|fs::read_binary_file",{path:e,...a}),readDir:async(e,a)=>await t("FLURX|fs::read_dir",{path:e,...a}),readTextFile:async(e,a)=>await t("FLURX|fs::read_text_file",{path:e,...a}),removeDir:async(e,a)=>{await t("FLURX|fs::remove_dir",{path:e,...a})},removeFile:async(e,a)=>{await t("FLURX|fs::remove_file",{path:e,...a})},renameFile:async(e,a,i)=>{await t("FLURX|fs::rename_file",{oldPath:e,newPath:a,...i})},writeBinaryFile:async(e,a,i)=>{await t("FLURX|fs::write_binary_file",{path:e,contents:a,...i})},writeTextFile:async(e,a,i)=>{await t("FLURX|fs::write_text_file",{path:e,contents:a,...i})}});return e.__emitEvent=(e,t)=>{window.__FLURX__[`_event_${e}`]?.(t)},e.__resolveIpc=(e,t)=>{window.__FLURX__[`_${e}`]?.(t)},e.app=_,e.emit=a,e.fs=n,e.invoke=t,e.listen=(e,t)=>{const a=`_event_${e}`;return Object.defineProperty(window.__FLURX__,a,{value:t,writable:!1,configurable:!0}),()=>{Reflect.deleteProperty(window.__FLURX__,a)}},e.log=r,e}({});Object.defineProperty(window,"__FLURX__",{value:__FLURX_IIFE__});
